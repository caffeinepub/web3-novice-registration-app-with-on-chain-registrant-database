{
  "kind": "build_request",
  "title": "Retry IC deployment and restore reachable frontend URL",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-31",
      "text": "Re-run the Internet Computer deployment (`dfx deploy --network ic`) and capture the deployed frontend and backend canister IDs from the deployment output.",
      "target": "unknown",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "retry"
        ]
      },
      "acceptanceCriteria": [
        "A new `dfx deploy --network ic` completes successfully for both backend and frontend canisters.",
        "The exact deployed canister IDs are recorded from the deploy output (frontend canister ID and backend canister ID)."
      ]
    },
    {
      "id": "REQ-32",
      "text": "Verify the deployed frontend is reachable via its canister URL on icp0.io and does not show the gateway error “Canister ID Not Resolved”, specifically addressing the previously failing URL `https://5cpxd-piaaa-aaaap-qib3q-cai.icp0.io`.",
      "target": "unknown",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "retry"
        ]
      },
      "acceptanceCriteria": [
        "Opening the new deployed frontend public URL `https://[frontend-canister-id].icp0.io/` loads the app successfully in a fresh/incognito browser session.",
        "The previously reported failing URL `https://5cpxd-piaaa-aaaap-qib3q-cai.icp0.io` is either confirmed as no longer the active deployment URL (superseded by the new frontend canister ID) or is remediated so it resolves correctly.",
        "No “Canister ID Not Resolved” gateway error occurs for the correct deployed frontend URL."
      ]
    },
    {
      "id": "REQ-33",
      "text": "After deployment, use the in-app Deployment Info diagnostics to confirm there is no frontend canister/domain mismatch and that the backend canister ID is correctly configured/visible for mainnet usage.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "retry"
        ]
      },
      "acceptanceCriteria": [
        "When the app is opened on mainnet, Deployment Info shows Network = \"Internet Computer (Mainnet)\".",
        "Deployment Info shows a Shareable Public URL that matches the actually-working `https://[frontend-canister-id].icp0.io` URL.",
        "Deployment Info shows a non-empty Backend Canister ID (not \"Not configured\").",
        "No mismatch warning is shown (i.e., no remediation message about differing configured vs accessed frontend canister IDs)."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor in `backend/main.mo`; only add `backend/migration.mo` if an upgrade requires state migration.",
    "Do not edit frontend files under immutable paths: `frontend/src/hooks/useInternetIdentity.ts`, `frontend/src/hooks/useInternetIdentity.tsx`, `frontend/src/hooks/useActor.ts`, `frontend/src/main.tsx`, `frontend/src/components/ui`.",
    "Use English for any user-facing text."
  ],
  "nonGoals": [
    "Adding new application features unrelated to deployment verification/remediation.",
    "Changing the registrant/profile/badge data model or application behavior unless required to make `dfx deploy --network ic` succeed and the deployed URL reachable."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}